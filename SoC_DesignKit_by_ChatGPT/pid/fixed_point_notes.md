# 🧮 固定小数点演算に関する注意点（Q4.4）

VerilogによるPID制御器などで固定小数点（fixed-point）演算を扱う場合のポイントをまとめます。

---

## ✅ 採用フォーマット

- 本テンプレートでは Q4.4 形式（8bit：符号1bit + 整数部3bit + 小数部4bit）を使用
- 範囲：`-8.0` ～ `+7.9375`
- 分解能：`1/16 ≒ 0.0625`

---

## 🔧 実装上の工夫

| 項目 | 内容 |
|------|------|
| 乗算結果の桁数拡張 | `8bit × 8bit = 16bit` 演算を使い、上位8bitを抽出（Q4.4保持） |
| 積分項の精度確保 | `reg [15:0] integral` として、加算誤差の蓄積に耐える設計 |
| スケーリング | 出力時は `pid_raw[15:8]` を使用して適切にQ4.4へ戻す |

---

## 💬 注意点

- オーバーフロー対策（飽和演算など）は別途必要
- 非常に小さなKiなどは桁落ちが起きる場合がある

---

## 📎 関連教材

- `pid_controller.v`：Verilog RTLテンプレート
- `c_to_hdl/`：CによるPID式からVerilogへの変換演習（ChatGPT支援）

---

## 🔖 ライセンス

MIT License © 2025 [Shinichi Samizo](https://github.com/Samizo-AITL)
