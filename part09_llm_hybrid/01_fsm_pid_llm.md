# 🤖 01. FSM・PID・LLMによるハイブリッド制御（AITL構想）

本節では、FSM（本能層）、PID（理性層）、LLM（知性層）という  
**三層構造のハイブリッド制御アーキテクチャ**である「AITL構想」について解説します。

---

## 🧠 AITL構想とは？

AITL（Artificial Instinct–Thinking–Language）は、以下の3層構造を持つ制御モデルです：

| 層 | 要素 | 役割 |
|----|------|------|
| 本能層 | FSM（状態機械） | 基本的な動作・ルールの実行（ON/OFF・フロー制御） |
| 理性層 | PID制御など | 数値的な安定・精度・性能を保証する連続制御 |
| 知性層 | LLM（大規模言語モデル） | 状況判断・例外対応・目的推論・対話など |

---

## 🧩 各層の制御構成

### ✅ FSM（状態機械）

- タスクの流れや遷移条件を定義
- 例：ロボットの「停止 → 前進 → 回避」などの流れ

### ✅ PID制御

- フィードバック制御の中心
- FSMの各状態での制御器として動作
- 実時間で物理系とやり取り

### ✅ LLM（GPTなど）

- 状況判断、環境の文脈理解、例外時の指示生成
- FSMの状態遷移条件や、制御パラメータの変更にも関与
- ChatGPT API 等と連携して動作可能

---

## 🏗️ 構成図（概要）

```
[LLM: 知性層]
     ↓（指示/推論）
[FSM: 本能層]───→ 状態遷移ロジック
     ↓（状態に応じた命令）
[PID: 理性層]───→ 実時間制御信号
```

---

## 🔍 例：自律移動ロボット

| 状態 | FSM動作 | PID制御 | LLM関与 |
|------|---------|----------|----------|
| 前進 | MoveForward | 距離維持 | 行先判断 |
| 停止 | Idle       | 0出力     | 指示待ち / 対話 |
| 障害物回避 | Avoid     | 軌道調整 | 「どの方向へ回避すべきか」 |

---

## 💡 目的と利点

- ルールベースの安定性（FSM）と精密制御（PID）を維持しつつ、
- 環境変化・例外・新規タスクへLLMが対応
- 状況依存の柔軟な**知能制御システム**の構築が可能

---

## 📁 次へ

次節では、具体的な「シナリオ制御とLLM活用」について掘り下げます。

📄 [`02_scenario_control.md`](./02_scenario_control.md)
